// Autogenerated by @prisma/client
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum authority {
  ADMIN
  USER
}

enum gender {
  MALE
  FEMALE
}

enum ag {
  SENIOR
  YOUTHA
  YOUTHB
  YOUTHC
  YOUTHD
}

enum pg {
  KADETS
  LK1
  LK2
}

enum weight_class {
  TO_22KG
  TO_24KG
  TO_26KG
  TO_27KG
  TO_29KG
  TO_32KG
  TO_33KG
  TO_35KG
  TO_37KG
  TO_39KG
  TO_41KG
  TO_42KG
  TO_43KG
  TO_44KG
  TO_45KG
  TO_46KG
  TO_47KG
  TO_48KG
  TO_49KG
  TO_51KG
  TO_52KG
  TO_53KG
  TO_54KG
  TO_55KG
  TO_57KG
  TO_58KG
  TO_59KG
  TO_61KG
  TO_62KG
  TO_63KG
  TO_65KG
  TO_67KG
  TO_68KG
  TO_73KG
  TO_74KG
  TO_78KG
  TO_80KG
  TO_87KG
  PLUS_45KG
  PLUS_57KG
  PLUS_59KG
  PLUS_63KG
  PLUS_65KG
  PLUS_67KG
  PLUS_68KG
  PLUS_73KG
  PLUS_78KG
  PLUS_80KG
  PLUS_87KG
}

enum kup {
  ONE
  TWO
  THREE
  FOUR
  FIVE
  SIX
  SEVEN
  EIGHT
  NINE
  TEN
  DAN
}

enum winner {
  RED
  BLUE
}

enum decision {
  RSC
  PTF
  PTG
  GDP
  SUP
  WDR
  DSQ
  PUN
  DQB
}

model File {
  id        String    @id @default(cuid())
  url       String
  filename  String
  mimeType  String
  size      Int
  tournamentContract Tournament? @relation("TournamentContract")
  tournamentResult   Tournament? @relation("TournamentResult")
}

model Tournament {
  id             String          @id @default(cuid())
  date           DateTime?
  name           String?
  location       String?
  contract       File?           @relation("TournamentContract", fields: [contractId], references: [id])
  contractId     String? @unique
  result         File?           @relation("TournamentResult", fields: [resultId], references: [id])
  resultId       String? @unique
  competitions   Competition[]
  participants   User[]          @relation("TournamentParticipants")
  timestamp      DateTime?
}

model Competition {
  id                  String @id @default(cuid()) 
  user                User? @relation(fields: [userId], references: [id])
  userId              String?
  tournament          Tournament? @relation(fields: [tournament_id], references: [id])
  tournament_id       String?
  pg                  pg?
  weight_class        weight_class?
  fight_number        String?
  end_score           String?
  winner              winner?
  video_url           String?
  decision            decision?
  timestamp           DateTime?
}

model User {
  id                  String @id @default(cuid())
  password            String?
  name                String?
  surname             String?
  email               String? @unique
  pushSubscription    String?
  authority           authority?
  failed_logins       Int? @default(0)
  birthday            DateTime?
  img                 String?
  weight_class        weight_class? 
  gender              gender?
  ag                  ag?
  pg                  pg?
  kup                 kup?
  competitions        Competition[]
  tournaments         Tournament[] @relation("TournamentParticipants")
  timestamp           DateTime?
}
